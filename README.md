# tz

## Теоретическая часть:

Приложение запущено в докер-контейнере через docker-compose.  
Контейнер рестартится, логов нет, так как не успевает писать. Что будешь делать?  

    Ответ: 
    1. Разделить на отдельные контейнеры и пробовать каждый.
    2. Смотреть в режиме реалтайма вывод докера.  
    3. Проверить права файла на запись (всякое бывает).  
    4. Пробовать делать задержки в скрипте на каждом пункте.  


Деплой сервиса провалился с сообщением типа “при запуске контейнера возникла ошибка” без деталей. Твои действия? 

    Ответ:  
    1. Проверить не наделал ли ерунды в коде.  
    2. Проверить все, что может содержать какую-либо информацию  
    3. Пробовать собрать другим методом, либо найти уже готовое решение (А их достаточно много если захотеть)  
    4. Метод проб, ошибок, научного тыка  


Билд завершился сообщением “Репозиторий не найден“. Что будешь делать?   

    Ответ:  
    1. Проверить существует ли вообще такой репозиторий. Возможно в адресе допущена ошибка.  
    2. Пробовать заменить репозиторий.  
    3. Пробовать выгрузить файлы локально и использовать их.  



Есть система неважно какой структуры. Требуется настроить мониторинг с нуля. Какие уровни ты охватишь?  
  Ответ:

     Самый базовый и самый необходимый уровень - мониторинг системы.  
      1. Нагрузка на процессор.  
      2. Свободное место в оперативной памяти.  
      3. Свободное место на жестком диске.  
      4. Нагрузка на сеть.  
      5. Нагрузка на жесткий диск — количество операций на запись и чтение.  
      6. Количество задач, запущенных на исполнение.  
      
    По необходимости мониторинг состояния приложений  
      1. Количество запросов в единицу времени: час, секунду, день, минуту — зависит от обилия трафика в вашей программе.  
      2. Количество активных пользователей в системе в единицу времени.  
      3. Количество различных записей в СУБД — в целом и новых в единицу времени.  
      4. Количество ошибок, которые вы успешно отловили и зарегистрировали.  
      
    Как идею от себя могу предложить массовый мониторинг между всеми системами.  
      1. Сделать общую базу с ip адресами всех нод.  
      2. Поставить задачу, чтобы каждая нода пинговала все адреса из списка и направляла результаты в базу.  
      3. Сравнивать результаты текущие и прошлые, отображать разницу в задержке и доступности между нодами.  
      4. Если повторяется длительная задержка между какими-то нодами, либо вообще отсутствует соединение, то вывести отдельным алертом.  
      5. Так же к алерту можно привязать вывод текущей нагрузки на систему и возможные ошибки.  

## Практическая часть

Напишите Dockerfile для сборки данного проекта https://github.com/syscoin/syscoin  
  
    В процессе выполнения  
    
    Самый простой и логичный способ использовать готовое решение:  
    docker pull zyuzka90/syscoin:dev  
    docker pull kleverio/syscoin:latest  

    А то ситуация на столько смешная, что даже сами в syscoin свой докер собрали нерабочий  
    https://github.com/syscoin/docker-syscoin-core/tree/master

Напишите скрипт, который сравнивает значения “result” и “height” на этих двух эндпоинтах.  

  *ключ result  
  https://api.etherscan.io/api?module=proxy&action=eth_blockNumber&apikey=YourApiKeyToken  
  
  *ключ height  
  https://api.blockcypher.com/v1/eth/main  
  
    Скрипт на php называется ResultAndHeight.php
    Готовый рабочий пример по адресу: 
    https://test.fearstrike.com
